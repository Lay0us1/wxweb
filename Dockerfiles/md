FROM nginx:latest
LABEL maintainer="xrsec"
LABEL mail="troy@zygd.site"
LABEL Github="https://github.com/XRSec/wxweb"

# https://github.com/doocs/md.git
RUN apt update -y \
    && apt upgrade -y \
    && apt install sudo -y \
    && curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash - \
    && apt install git nodejs -y \
    && git clone https://github.com/doocs/md.git /tmp/www \
    && cd /tmp/www \
    && npm i \
    && npm run build:h5-netlify \
    && cp -r /tmp/www/dist/* /usr/share/nginx/html/ \
    && rm -rf /tmp/www

ENV LANG en_US.utf8